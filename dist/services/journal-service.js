class JournalService{constructor(){this.defaultPage="journal"}init(){this.renderJournal()}renderJournal=e=>{const t=document.querySelector(".journal-modal-wrapper"),d=document.querySelector(".add-journal-modal"),a=document.querySelector(".add-journal-modal .form"),n=document.querySelector(".edit-journal-modal"),l=document.querySelector(".edit-journal-modal .form"),o=document.querySelector(".journal__list"),r=db.collection("journal"),u=document.querySelector(".add-journal");let c;const i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],v=e=>{const t=e.data(),d=new Date(t.date),a=`${i[d.getDay()]} ${d.getDate()}.${s[d.getMonth()]} ${d.getFullYear()}`,u=`\n\t\t\t\t<div class="journal__item" data-id='${e.id}'>\n\t\t\t\t\t<div>${t.feeling}</div>\n\t\t\t\t\t<p class='card-description'>${t.entry}</p>\n\t\t\t\t\t<p class='card-date'>${a}</p>\n\t\t\t\t\t<div>${t.user}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button class="btn btn-edit edit-journal">Edit</button>\n\t\t\t\t\t\t\t<button class="btn btn-delete delete-journal">Delete</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;o.insertAdjacentHTML("beforeend",u);document.querySelector(`[data-id='${e.id}'] .edit-journal`).addEventListener("click",(()=>{n.classList.add("modal-show"),c=e.id,l.feeling.value=t.feeling,l.entry.value=t.entry,l.date.value=t.date,l.user.value=t.user}));document.querySelector(`[data-id='${e.id}'] .delete-journal`).addEventListener("click",(()=>{r.doc(`${e.id}`).delete().then((()=>{console.log("Document succesfully deleted!")})).catch((e=>{console.log("Error removing document",e)}))}))};u.addEventListener("click",(()=>{d.classList.add("modal-show"),a.feeling.value="",a.entry.value="",a.date.value="",a.user.value=""})),window.addEventListener("click",(e=>{e.target===d&&d.classList.remove("modal-show"),e.target===n&&n.classList.remove("modal-show")})),r.onSnapshot((e=>{e.docChanges().forEach((e=>{if("added"===e.type&&v(e.doc),"removed"===e.type){let t=document.querySelector(`[data-id='${e.doc.id}']`);t.parentElement.removeChild(t)}if("modified"===e.type){let t=document.querySelector(`[data-id='${e.doc.id}']`);t.parentElement.removeChild(t),v(e.doc)}}))})),a.addEventListener("submit",(e=>{e.preventDefault(),r.add({feeling:a.feeling.value,entry:a.entry.value,date:a.date.value,user:a.user.value}),t.classList.remove("modal-show")})),l.addEventListener("submit",(e=>{e.preventDefault(),r.doc(c).update({feeling:l.feeling.value,entry:l.entry.value,date:l.date.value,user:l.user.value}),n.classList.remove("modal-show")}))}}const journalService=new JournalService;export default journalService;
//# sourceMappingURL=journal-service.js.map