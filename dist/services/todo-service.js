class TodoService{constructor(){this.defaultPage="todos"}init(){this.renderTodo()}renderTodo=t=>{const e=document.querySelector("#todos"),o=e.querySelector(".todo-modal-wrapper"),i=(o.querySelector(".modal"),e.querySelector(".add-todo-modal")),d=i.querySelector(".modal"),l=i.querySelector(".form"),r=e.querySelector(".add-todo-close"),a=e.querySelector(".edit-todo-modal"),n=a.querySelector(".modal"),s=a.querySelector(".form"),c=e.querySelector(".edit-todo-close"),u=e.querySelector(".todo__list"),v=db.collection("todo"),y=e.querySelector(".add-todo");let m;const p=()=>{d.style.cssText="animation: slideDown .5s ease; animation-fill-mode: forwards;",setTimeout((()=>{i.style.display="none"}),500)},f=()=>{n.style.cssText="animation: slideDown .5s ease; animation-fill-mode: forwards;",setTimeout((()=>{a.style.display="none"}),500)},S=t=>{const e=t.data(),o=`\n\t\t\t\t<div class="card todo__item priority-${`${"Low"===e.priority?"low":""}${"Medium"===e.priority?"med":""}${"High"===e.priority?"high":""}`}" data-id="${t.id}">\n\t\t\t\t\t<div>${e.title}</div>\n\t\t\t\t\t<div>${e.list}</div>\n\t\t\t\t\t<div>${e.assign}</div>\n\t\t\t\t\t<div>${e.priority}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button class="btn btn-edit edit-todo">Edit</button>\n\t\t\t\t\t\t<button class="btn btn-delete delete-todo">Delete</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;u.insertAdjacentHTML("beforeend",o);document.querySelector(`[data-id='${t.id}'] .edit-todo`).addEventListener("click",(()=>{a.style.display="flex",n.style.cssText="animation: slideUp .5s ease; animation-fill-mode: forwards;",m=t.id,s.title.value=e.title,s.list.value=e.list,s.assign.value=e.assign,s.priority.value=e.priority}));document.querySelector(`[data-id='${t.id}'] .delete-todo`).addEventListener("click",(()=>{v.doc(`${t.id}`).delete().then((()=>{console.log("Document succesfully deleted!")})).catch((t=>{console.log("Error removing document",t)}))}))};y.addEventListener("click",(()=>{i.style.display="flex",d.style.cssText="animation: slideUp .5s ease; animation-fill-mode: forwards;",l.title.value="",l.list.value="",l.assign.value="",l.priority.value=""})),r.addEventListener("click",(t=>{t.preventDefault(),p()})),c.addEventListener("click",(t=>{t.preventDefault(),f()})),window.addEventListener("click",(t=>{t.target===i&&p(),t.target===a&&f()})),v.onSnapshot((t=>{t.docChanges().forEach((t=>{if("added"===t.type&&(S(t.doc),console.log("added todo item")),"removed"===t.type){let e=document.querySelector(`[data-id='${t.doc.id}']`);e.parentElement.removeChild(e)}if("modified"===t.type){let e=document.querySelector(`[data-id='${t.doc.id}']`);e.parentElement.removeChild(e),S(t.doc)}}))})),l.addEventListener("submit",(t=>{t.preventDefault(),v.add({title:l.title.value,list:l.list.value,assign:l.assign.value,priority:l.priority.value}),p()})),s.addEventListener("submit",(t=>{t.preventDefault(),v.doc(m).update({title:s.title.value,list:s.list.value,assign:s.assign.value,priority:s.priority.value}),f()}))}}const todoService=new TodoService;export default todoService;
//# sourceMappingURL=todo-service.js.map