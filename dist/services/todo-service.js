class TodoService{constructor(){this.defaultPage="todos"}init(){this.renderTodo()}renderTodo=t=>{const e=document.querySelector(".todo-modal-wrapper"),o=document.querySelector(".add-todo-modal"),d=document.querySelector(".add-todo-modal .form"),i=document.querySelector(".edit-todo-modal"),l=document.querySelector(".edit-todo-modal .form"),r=document.querySelector(".todo__list"),a=db.collection("todo"),s=document.querySelector(".add-todo"),n=document.querySelector(".btn-close-modal");let c;const u=t=>{const e=t.data(),o=`\n\t\t\t\t<div class="card todo__item priority-${`${"Low"===e.priority?"low":""}${"Medium"===e.priority?"med":""}${"High"===e.priority?"high":""}`}" data-id="${t.id}">\n\t\t\t\t\t<div>${e.title}</div>\n\t\t\t\t\t<div>${e.list}</div>\n\t\t\t\t\t<div>${e.assign}</div>\n\t\t\t\t\t<div>${e.priority}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button class="btn btn-edit edit-todo">Edit</button>\n\t\t\t\t\t\t<button class="btn btn-delete delete-todo">Delete</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;r.insertAdjacentHTML("beforeend",o);document.querySelector(`[data-id='${t.id}'] .edit-todo`).addEventListener("click",(()=>{i.classList.add("modal-show"),c=t.id,l.title.value=e.title,l.list.value=e.list,l.assign.value=e.assign,l.priority.value=e.priority}));document.querySelector(`[data-id='${t.id}'] .delete-todo`).addEventListener("click",(()=>{a.doc(`${t.id}`).delete().then((()=>{console.log("Document succesfully deleted!")})).catch((t=>{console.log("Error removing document",t)}))}))};s.addEventListener("click",(()=>{o.classList.add("modal-show"),d.title.value="",d.list.value="",d.assign.value="",d.priority.value=""})),n.addEventListener("click",(()=>{e.classList.remove("modal-show")})),window.addEventListener("click",(t=>{t.target===o&&o.classList.remove("modal-show"),t.target===i&&i.classList.remove("modal-show")})),a.onSnapshot((t=>{t.docChanges().forEach((t=>{if("added"===t.type&&u(t.doc),"removed"===t.type){let e=document.querySelector(`[data-id='${t.doc.id}']`);e.parentElement.removeChild(e)}if("modified"===t.type){let e=document.querySelector(`[data-id='${t.doc.id}']`);e.parentElement.removeChild(e),u(t.doc)}}))})),d.addEventListener("submit",(t=>{t.preventDefault(),a.add({title:d.title.value,list:d.list.value,assign:d.assign.value,priority:d.priority.value}),e.classList.remove("modal-show")})),l.addEventListener("submit",(t=>{t.preventDefault(),a.doc(c).update({title:l.title.value,list:l.list.value,assign:l.assign.value,priority:l.priority.value}),i.classList.remove("modal-show")}))}}const todoService=new TodoService;export default todoService;
//# sourceMappingURL=todo-service.js.map