class EventService{constructor(){this.defaultPage="events"}init(){this.renderEvents()}renderEvents=t=>{const e=document.querySelector("#events"),a=(e.querySelector(".event-modal-wrapper").querySelector(".modal"),e.querySelector(".add-event-modal")),n=a.querySelector(".modal"),l=e.querySelector(".add-event-modal .form"),d=e.querySelector(".add-event-close"),i=e.querySelector(".edit-event-modal"),o=i.querySelector(".modal"),c=e.querySelector(".edit-event-modal .form"),s=e.querySelector(".edit-event-close"),r=e.querySelector(".event__list"),v=db.collection("events"),u=e.querySelector(".add-event");let p;const m=()=>{n.style.cssText="animation: slideDown .5s ease; animation-fill-mode: forwards;",setTimeout((()=>{a.style.display="none"}),500)},y=()=>{o.style.cssText="animation: slideDown .5s ease; animation-fill-mode: forwards;",setTimeout((()=>{i.style.display="none"}),500)},g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],f=["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],S=t=>{const e=t.data(),a=new Date(e.date),n=`${g[a.getDay()]} ${a.getDate()}.${f[a.getMonth()]} ${a.getFullYear()}`,l=["#C6A8F0","#D0D6FB","#F4CFA4","#FBEEDF","#909EF5","#F1E9FB"];document.querySelectorAll(".avatar").forEach((t=>{const e=t.innerText;t.style.backgroundColor=l[(t=>{const e=t.split("").map((t=>t.charCodeAt(0))).join("");return parseInt(e,17)})(e)%l.length]}));const d=document.querySelector(".card__container.card-toggle"),s=document.querySelector("#description");d.forEach((function(t,e){t.addEventListener("click",(()=>{s[e].classList.toggle("open-card")})),console.log("hello")}));const u=`\n\t\t\t\t<div class="card card--event card--${e.label}" data-id='${t.id}'>\n\t\t\t\t\t<div class='card--${e.label}__line'></div>\n\t\t\t\t\t<div class='card__container card-toggle'>\n\t\t\t\t\t\t<div class='card__header'>\n\t\t\t\t\t\t\t\t<p class='card__header--label'>${e.label}</p>\n\t\t\t\t\t\t\t\t<p class='card__header--date'>${n}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class='card-content'>\n\t\t\t\t\t\t\t<div class='card-content__details'>\n\t\t\t\t\t\t\t\t<h4 class='card-content__details--title'>${e.title}</h4>\n\t\t\t\t\t\t\t\t<p class='card-content__details--location'>${e.location}</p>\n\t\t\t\t\t\t\t\t<div id='description' class="card-content__details--description">\n\t\t\t\t\t\t\t\t\t<p>${e.description}</p>\n\t\t\t\t\t\t\t\t\t<button class="edit-event btn-circle--edit"></button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t\t\t<div class='card-content__footer'>\n\t\t\t\t\t\t\t\t<button class="delete-event btn-circle--complete"></button>\n\t\t\t\t\t\t\t\t<div class='avatar'><p>${e.assign}</p></div>\n\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;r.insertAdjacentHTML("beforeend",u);document.querySelector(`[data-id='${t.id}'] .edit-event`).addEventListener("click",(()=>{i.style.display="flex",o.style.cssText="animation: slideUp .5s ease; animation-fill-mode: forwards;",p=t.id,c.title.value=e.title,c.description.value=e.description,c.location.value=e.location,c.date.value=e.date,c.assign.value=e.assign,c.label.value=e.label}));document.querySelector(`[data-id='${t.id}'] .delete-event`).addEventListener("click",(()=>{v.doc(`${t.id}`).delete().then((()=>{console.log("Document succesfully deleted!")})).catch((t=>{console.log("Error removing document",t)}))}))};u.addEventListener("click",(()=>{a.style.display="flex",n.style.cssText="animation: slideUp .5s ease; animation-fill-mode: forwards;",l.title.value="",l.description.value="",l.location.value="",l.date.value="",l.assign.value="",l.label.value=""})),d.addEventListener("click",(t=>{t.preventDefault(),m()})),s.addEventListener("click",(t=>{t.preventDefault(),y()})),window.addEventListener("click",(t=>{t.target===a&&m(),t.target===i&&y()})),v.onSnapshot((t=>{t.docChanges().forEach((t=>{if("added"===t.type&&setTimeout((()=>{S(t.doc)}),500),"removed"===t.type){let e=document.querySelector(`[data-id='${t.doc.id}']`);e.parentElement.removeChild(e)}if("modified"===t.type){let e=document.querySelector(`[data-id='${t.doc.id}']`);e.parentElement.removeChild(e),S(t.doc)}}))})),l.addEventListener("submit",(t=>{t.preventDefault(),v.add({title:l.title.value,description:l.description.value,location:l.location.value,date:l.date.value,assign:l.assign.value,label:l.label.value}),m()})),c.addEventListener("submit",(t=>{t.preventDefault(),v.doc(p).update({title:c.title.value,description:c.description.value,location:c.location.value,date:c.date.value,assign:c.assign.value,label:c.label.value}),y()}))}}const eventService=new EventService;export default eventService;
//# sourceMappingURL=event-service.js.map