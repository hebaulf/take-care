const modalWrapper=document.querySelector(".modal-wrapper"),addModal=document.querySelector(".add-modal"),addModalForm=document.querySelector(".add-modal .form"),editModal=document.querySelector(".edit-modal"),editModalForm=document.querySelector(".edit-modal .form"),btnAdd=document.querySelector(".btn-add"),tableUsers=document.querySelector(".table-users");let id;const renderUser=e=>{const d=`\n    <tr data-id='${e.id}'>\n      <td>${e.data().firstName}</td>\n      <td>${e.data().lastName}</td>\n      <td>${e.data().email}</td>\n      <td>${e.data().password}</td>\n      <td>\n        <button class="btn btn-edit">Edit</button>\n        <button class="btn btn-delete">Delete</button>\n      </td>\n    </tr>\n  `;tableUsers.insertAdjacentHTML("beforeend",d);document.querySelector(`[data-id='${e.id}'] .btn-edit`).addEventListener("click",(()=>{editModal.classList.add("modal-show"),id=e.id,editModalForm.firstName.value=e.data().firstName,editModalForm.lastName.value=e.data().lastName,editModalForm.email.value=e.data().email,editModalForm.password.value=e.data().password}));document.querySelector(`[data-id='${e.id}'] .btn-delete`).addEventListener("click",(()=>{db.collection("users").doc(`${e.id}`).delete().then((()=>{console.log("Document succesfully deleted!")})).catch((e=>{console.log("Error removing document",e)}))}))};btnAdd.addEventListener("click",(()=>{addModal.classList.add("modal-show"),addModalForm.firstName.value="",addModalForm.lastName.value="",addModalForm.email.value="",addModalForm.password.value=""})),window.addEventListener("click",(e=>{e.target===addModal&&addModal.classList.remove("modal-show"),e.target===editModal&&editModal.classList.remove("modal-show")})),db.collection("users").onSnapshot((e=>{e.docChanges().forEach((e=>{if("added"===e.type&&renderUser(e.doc),"removed"===e.type){let d=document.querySelector(`[data-id='${e.doc.id}']`).parentElement;tableUsers.removeChild(d)}if("modified"===e.type){let d=document.querySelector(`[data-id='${e.doc.id}']`).parentElement;tableUsers.removeChild(d),renderUser(e.doc)}}))})),addModalForm.addEventListener("submit",(e=>{e.preventDefault(),db.collection("users").add({firstName:addModalForm.firstName.value,lastName:addModalForm.lastName.value,email:addModalForm.email.value,password:addModalForm.password.value}),modalWrapper.classList.remove("modal-show")})),editModalForm.addEventListener("submit",(e=>{e.preventDefault(),db.collection("users").doc(id).update({firstName:editModalForm.firstName.value,lastName:editModalForm.lastName.value,email:editModalForm.email.value,password:editModalForm.password.value}),editModal.classList.remove("modal-show")}));
//# sourceMappingURL=index.js.map